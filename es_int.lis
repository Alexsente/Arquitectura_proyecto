00000000                                     1  * Inicializa el SP y el PC
00000000                                     2          ORG     $0
00000000  00008000                           3          DC.L    $8000           *Pila
00000004  00002784                           4          DC.L    INICIO          *PC
00000400                                     5          ORG     $400
00000400                                     6  
00000400                                     7  	*Buffers
00000400                                     8  BUS_RBA:DS.B 2002
00000BD2                                     9  BUS_RBB:DS.B 2002
000013A4                                    10  BUS_TBA:DS.B 2002
00001B76                                    11  BUS_TBB:DS.B 2002
00002348                                    12  
00002348                                    13  	*Punteros
00002348  00000000                          14  RBA_IN_PUNT: DC.L 0
0000234C  00000000                          15  RBA_FIN_PUNT:DC.L 0
00002350  00000000                          16  RBA_EXT_PUNT:DC.L 0
00002354  00000000                          17  RBA_INT_PUNT:DC.L 0
00002358  00000000                          18  RBB_IN_PUNT: DC.L 0
0000235C  00000000                          19  RBB_FIN_PUNT:DC.L 0
00002360  00000000                          20  RBB_EXT_PUNT:DC.L 0
00002364  00000000                          21  RBB_INT_PUNT:DC.L 0
00002368  00000000                          22  TBA_IN_PUNT: DC.L 0
0000236C  00000000                          23  TBA_FIN_PUNT:DC.L 0
00002370  00000000                          24  TBA_EXT_PUNT:DC.L 0
00002374  00000000                          25  TBA_INT_PUNT:DC.L 0
00002378  00000000                          26  TBB_IN_PUNT: DC.L 0
0000237C  00000000                          27  TBB_FIN_PUNT:DC.L 0
00002380  00000000                          28  TBB_EXT_PUNT:DC.L 0
00002384  00000000                          29  TBB_INT_PUNT:DC.L 0
00002388                                    30  
00002388                                    31  
00002388                                    32  * Definicion de equivalencias
00002388                                    33  
00002388  =00EFFC01                         34  MR1A    EQU     $effc01       * de modo A (escritura)
00002388  =00EFFC01                         35  MR2A    EQU     $effc01       * de modo A (2 escritura)
00002388  =00EFFC03                         36  SRA     EQU     $effc03       * de estado A (lectura)
00002388  =00EFFC03                         37  CSRA    EQU     $effc03       * de seleccion de reloj A (escritura)
00002388  =00EFFC05                         38  CRA     EQU     $effc05       * de control A (escritura)
00002388  =00EFFC07                         39  TBA     EQU     $effc07       * buffer transmision A (escritura)
00002388  =00EFFC07                         40  RBA     EQU     $effc07       * buffer recepcion A  (lectura)
00002388  =00EFFC17                         41  TBB     EQU     $effc17       * buffer trasmisión B
00002388  =00EFFC17                         42  RBB     EQU     $effc17       * buffer recepción B
00002388  =00EFFC09                         43  ACR     EQU     $effc09       * de control auxiliar
00002388  =00EFFC0B                         44  IMR     EQU     $effc0B       * de mascara de interrupcion A (escritura)
00002388  =00EFFC0B                         45  ISR     EQU     $effc0B       * de estado de interrupcion A (lectura)
00002388                                    46  
00002388                                    47  *INIT
00002388                                    48  INIT:
00002388  21FC 00000400 2348                49  	MOVE.L #BUS_RBA,RBA_IN_PUNT
00002390  21FC 00000400 2350                50  	MOVE.L #BUS_RBA,RBA_EXT_PUNT
00002398  21FC 00000400 2354                51  	MOVE.L #BUS_RBA,RBA_INT_PUNT
000023A0  21FC 00000400 234C                52  	MOVE.L #BUS_RBA,RBA_FIN_PUNT
000023A8  06B8 000007CF 234C                53  	ADD.L  #1999,RBA_FIN_PUNT
000023B0  21FC 00000BD2 2358                54  	MOVE.L #BUS_RBB,RBB_IN_PUNT
000023B8  21FC 00000BD2 2360                55  	MOVE.L #BUS_RBB,RBB_EXT_PUNT
000023C0  21FC 00000BD2 2364                56  	MOVE.L #BUS_RBB,RBB_INT_PUNT
000023C8  21FC 00000BD2 235C                57  	MOVE.L #BUS_RBB,RBB_FIN_PUNT
000023D0  06B8 000007CF 235C                58  	ADD.L  #1999,RBB_FIN_PUNT
000023D8  21FC 000013A4 2368                59  	MOVE.L #BUS_TBA,TBA_IN_PUNT
000023E0  21FC 000013A4 2370                60  	MOVE.L #BUS_TBA,TBA_EXT_PUNT
000023E8  21FC 000013A4 2374                61  	MOVE.L #BUS_TBA,TBA_INT_PUNT
000023F0  21FC 000013A4 236C                62  	MOVE.L #BUS_TBA,TBA_FIN_PUNT
000023F8  06B8 000007CF 236C                63  	ADD.L  #1999,TBA_FIN_PUNT
00002400  21FC 00001B76 2378                64  	MOVE.L #BUS_TBB,TBB_IN_PUNT
00002408  21FC 00001B76 2380                65  	MOVE.L #BUS_TBB,TBB_EXT_PUNT
00002410  21FC 00001B76 2384                66  	MOVE.L #BUS_TBB,TBB_INT_PUNT
00002418  21FC 00001B76 237C                67  	MOVE.L #BUS_TBB,TBB_FIN_PUNT
00002420  06B8 000007CF 237C                68  	ADD.L  #1999,TBB_FIN_PUNT
00002428  4E75                              69  	RTS
0000242A                                    70  
0000242A                                    71    *********************LEECAR**********************
0000242A                                    72  
0000242A                                    73    LEECAR:
0000242A  0800 0000                         74      BTST    #0,D0
0000242E  6700 0092                         75      BEQ LA_LINEA
00002432                                    76  
00002432                                    77  LB_LINEA:
00002432  B07C 0001                         78       CMP #$00000001,D0
00002436  6700 0046                         79       BEQ LB_REC
0000243A                                    80  
0000243A                                    81  LB_TRANS:
0000243A  2478 2378                         82       MOVE.L TBB_IN_PUNT,A2
0000243E  2678 2380                         83       MOVE.L TBB_EXT_PUNT,A3
00002442  2878 2384                         84       MOVE.L TBB_INT_PUNT,A4
00002446  2A78 237C                         85       MOVE.L TBB_FIN_PUNT,A5
0000244A  B8CB                              86       CMP  A3,A4    * E=I?
0000244C  6700 0104                         87       BEQ VACIO     * E= I, entonces buffer vacio
00002450  528D                              88       ADD.L #1,A5
00002452  BACB                              89       CMP A3,A5     * E = F+1?
00002454  538D                              90       SUB.L #1,A5  *Se restablece F a sus posicion original
00002456  6700 000C                         91       BEQ TBB_RESET
0000245A  101B                              92       MOVE.B  (A3)+,D0
0000245C  21CB 2380                         93       MOVE.L  A3,TBB_EXT_PUNT
00002460  6000 00F2                         94       BRA FIN_LEECAR
00002464                                    95    TBB_RESET:
00002464  B8CA                              96       CMP A2,A4  *I=P?
00002466  6600 000C                         97       BNE TBB_I_NO_P
0000246A  1012                              98       MOVE.B   (A2),D0
0000246C  21CA 2380                         99       MOVE.L  A2,TBB_EXT_PUNT
00002470  6000 00E2                        100       BRA FIN_LEECAR
00002474                                   101  TBB_I_NO_P:
00002474  101A                             102       MOVE.B  (A2)+,D0
00002476  21CA 2380                        103       MOVE.L  A2,TBB_EXT_PUNT
0000247A  6000 00D8                        104       BRA FIN_LEECAR
0000247E                                   105  
0000247E                                   106  LB_REC:
0000247E  2478 2358                        107      MOVE.L RBB_IN_PUNT,A2
00002482  2678 2360                        108      MOVE.L RBB_EXT_PUNT,A3
00002486  2878 2364                        109      MOVE.L RBB_INT_PUNT,A4
0000248A  2A78 235C                        110      MOVE.L RBB_FIN_PUNT,A5
0000248E  B8CB                             111      CMP  A3,A4    * E=I?
00002490  6700 00C0                        112      BEQ VACIO     * E= I, entonces buffer vacio
00002494  528D                             113      ADD.L #1,A5
00002496  BACB                             114      CMP A3,A5     * E = F+1?
00002498  538D                             115      SUB.L #1,A5  *Se restablece F a sus posicion original
0000249A  6700 000C                        116      BEQ RBB_RESET
0000249E  101B                             117      MOVE.B  (A3)+,D0
000024A0  21CB 2360                        118      MOVE.L  A3,RBB_EXT_PUNT
000024A4  6000 00AE                        119      BRA FIN_LEECAR
000024A8                                   120  RBB_RESET:
000024A8  B8CA                             121      CMP A2,A4  *I=P?
000024AA  6600 000C                        122      BNE RBB_I_NO_P
000024AE  1012                             123      MOVE.B   (A2),D0
000024B0  21CA 2360                        124      MOVE.L  A2,RBB_EXT_PUNT
000024B4  6000 009E                        125      BRA FIN_LEECAR
000024B8                                   126  RBB_I_NO_P:
000024B8  101A                             127      MOVE.B  (A2)+,D0
000024BA  21CA 2360                        128      MOVE.L  A2,RBB_EXT_PUNT
000024BE  6000 0094                        129      BRA FIN_LEECAR
000024C2                                   130  
000024C2                                   131  LA_LINEA:
000024C2  B07C 0000                        132      CMP #$00000000,D0
000024C6  6700 0046                        133      BEQ LA_REC
000024CA                                   134  
000024CA                                   135  LA_TRANS:
000024CA  2478 2368                        136      MOVE.L TBA_IN_PUNT,A2
000024CE  2678 2370                        137      MOVE.L TBA_EXT_PUNT,A3
000024D2  2878 2374                        138      MOVE.L TBA_INT_PUNT,A4
000024D6  2A78 236C                        139      MOVE.L TBA_FIN_PUNT,A5
000024DA  B8CB                             140      CMP  A3,A4    * E=I?
000024DC  6700 0074                        141      BEQ VACIO     * E= I, entonces buffer vacio
000024E0  528D                             142      ADD.L #1,A5
000024E2  BACB                             143      CMP A3,A5     * E = F+1?
000024E4  538D                             144      SUB.L #1,A5  *Se restablece F a sus posicion original
000024E6  6700 000C                        145      BEQ TBA_RESET
000024EA  101B                             146      MOVE.B  (A3)+,D0
000024EC  21CB 2380                        147      MOVE.L  A3,TBB_EXT_PUNT
000024F0  6000 0062                        148      BRA FIN_LEECAR
000024F4                                   149  TBA_RESET:
000024F4  B8CA                             150      CMP A2,A4  *I=P?
000024F6  6600 000C                        151      BNE TBA_I_NO_P
000024FA  1012                             152      MOVE.B  (A2),D0
000024FC  21CA 2370                        153      MOVE.L  A2,TBA_EXT_PUNT
00002500  6000 0052                        154      BRA FIN_LEECAR
00002504                                   155  TBA_I_NO_P:
00002504  101A                             156      MOVE.B  (A2)+,D0
00002506  21CA 2370                        157      MOVE.L  A2,TBA_EXT_PUNT
0000250A  6000 0048                        158      BRA FIN_LEECAR
0000250E                                   159  
0000250E                                   160  LA_REC:
0000250E  2478 2348                        161      MOVE.L RBA_IN_PUNT,A2
00002512  2678 2350                        162      MOVE.L RBA_EXT_PUNT,A3
00002516  2878 2354                        163      MOVE.L RBA_INT_PUNT,A4
0000251A  2A78 234C                        164      MOVE.L RBA_FIN_PUNT,A5
0000251E  B8CB                             165      CMP  A3,A4    * E=I?
00002520  6700 0030                        166      BEQ VACIO     * E= I, entonces buffer vacio
00002524  528D                             167      ADD.L #1,A5
00002526  BACB                             168      CMP A3,A5     * E = F+1?
00002528  538D                             169      SUB.L #1,A5  *Se restablece F a sus posicion original
0000252A  6700 000C                        170      BEQ RBA_RESET
0000252E  101B                             171      MOVE.B  (A3)+,D0
00002530  21CB 2350                        172      MOVE.L  A3,RBA_EXT_PUNT
00002534  6000 001E                        173      BRA FIN_LEECAR
00002538                                   174  RBA_RESET:
00002538  B8CA                             175      CMP A2,A4  *I=P?
0000253A  6600 000C                        176      BNE RBA_I_NO_P
0000253E  1012                             177      MOVE.B  (A2),D0
00002540  21CA 2350                        178      MOVE.L  A2,RBA_EXT_PUNT
00002544  6000 000E                        179      BRA FIN_LEECAR
00002548                                   180  RBA_I_NO_P:
00002548  101A                             181      MOVE.B  (A2)+,D0
0000254A  21CA 2350                        182      MOVE.L  A2,RBA_EXT_PUNT
0000254E  6000 0004                        183      BRA FIN_LEECAR
00002552                                   184  
00002552                                   185    VACIO:
00002552  70FF                             186      MOVE.L #$ffffffff,D0
00002554  4E75                             187    FIN_LEECAR:RTS
00002556                                   188  
00002556                                   189  ********************ESCCAR********************
00002556                                   190  ESCCAR:
00002556                                   191  
00002556  0800 0000                        192      BTST #0,D0
0000255A  6700 00A6                        193      BEQ EA_LINEA
0000255E                                   194  
0000255E                                   195  EB_LINEA:
0000255E                                   196  
0000255E  B07C 0001                        197      CMP #$00000001,D0
00002562  6700 0050                        198      BEQ ESC_REC_B
00002566                                   199  
00002566                                   200  ESC_TRANS_B:
00002566  2478 2378                        201      MOVE.L  TBB_IN_PUNT,A2 *Se mete el puntero de Principio al A2
0000256A  2678 2380                        202      MOVE.L TBB_EXT_PUNT,A3 *Se mete el puntero de E al A3
0000256E  2878 2384                        203      MOVE.L TBB_INT_PUNT,A4 *Se mete el puntero I en A4
00002572  2A78 237C                        204      MOVE.L TBB_FIN_PUNT,A5 *Se mete el puntero FIn en A5
00002576  538B                             205      SUB.L #1,A3  *Se le resta 1 a E
00002578  B9CB                             206      CMP.L A3,A4 * I=E-1?
0000257A  528B                             207      ADD.L #1,A3  *Se restablece el valor de E
0000257C  6700 0128                        208      BEQ LLENO
00002580  528D                             209      ADD.L #1,A5   *Se le añade 1 al puntero de fin
00002582  BBCC                             210      CMP.L A4,A5   *Se comparan los punteros I y F+1
00002584  538D                             211      SUB.L #1,A5   *Se restablece el valor del puntero FIn
00002586  6700 001A                        212      BEQ  TBB_AUX      *Está en la posicion auxiliar
0000258A                                   213  
0000258A                                   214  TBB_NO_AUX:
0000258A  B9CB                             215      CMP.L A3,A4  *Se comparan I y E
0000258C  6C00 000C                        216      BGE TBB_MAYOR
00002590  528C                             217      ADD.L #1,A4
00002592  1881                             218      MOVE.B  D1,(A4)            *Push del registro D1 en el buffer
00002594  21CC 2384                        219      MOVE.L  A4,TBB_INT_PUNT    *Guarda la nueva direcion del puntero
00002598  4E75                             220      RTS
0000259A                                   221  TBB_MAYOR:
0000259A  18C1                             222      MOVE.B  D1,(A4)+           *Push del registro D1 en el buffer
0000259C  21CC 2384                        223      MOVE.L  A4,TBB_INT_PUNT           *Guarda la nueva direcion del puntero
000025A0  4E75                             224      RTS
000025A2                                   225  
000025A2                                   226  TBB_AUX:
000025A2  B5CB                             227      CMP.L A3,A2  * E=P?
000025A4  6700 0100                        228      BEQ   LLENO
000025A8  2878 2378                        229      MOVE.L  TBB_IN_PUNT,A4
000025AC  1881                             230      MOVE.B  D1,(A4)   *Push del registro D1 en el buffer
000025AE  21CC 2384                        231      MOVE.L  A4,TBB_INT_PUNT  *Se Inicializa I con el valor de Principio
000025B2  4E75                             232      RTS
000025B4                                   233  
000025B4                                   234  
000025B4                                   235  
000025B4                                   236  ESC_REC_B:
000025B4  2878 2364                        237    MOVE.L RBB_INT_PUNT,A4 *Se mete el puntero I en A4
000025B8  2A78 235C                        238    MOVE.L RBB_FIN_PUNT,A5 *Se mete el puntero FIn en A5
000025BC  2678 2360                        239    MOVE.L RBB_EXT_PUNT,A3 *Se mete el puntero de E al A3
000025C0  2478 2358                        240    MOVE.L  RBB_IN_PUNT,A2 *Se mete el puntero de Principio al A2
000025C4  538B                             241    SUB.L #1,A3  *Se le resta 1 a E
000025C6  B9CB                             242    CMP.L A3,A4 * I=E-1?
000025C8  528B                             243    ADD.L #1,A3  *Se restablece el valor de E
000025CA  6700 00DA                        244    BEQ LLENO
000025CE  528D                             245    ADD.L #1,A5   *Se le añade 1 al puntero de fin
000025D0  BBCC                             246    CMP.L A4,A5   *Se comparan los punteros I y F+1
000025D2  538D                             247    SUB.L #1,A5   *Se restablece el valor del puntero FIn
000025D4  6700 001A                        248    BEQ  RBB_AUX      *Está en la posicion auxiliar
000025D8                                   249  
000025D8                                   250  RBB_NO_AUX:
000025D8  B9CB                             251    CMP.L A3,A4  *Se comparan I y E
000025DA  6C00 000C                        252    BGE RBB_MAYOR
000025DE  528C                             253    ADD.L #1,A4
000025E0  1881                             254    MOVE.B  D1,(A4)            *Push del registro D1 en el buffer
000025E2  21CC 2364                        255    MOVE.L  A4,RBB_INT_PUNT    *Guarda la nueva direcion del puntero
000025E6  4E75                             256    RTS
000025E8                                   257  RBB_MAYOR:
000025E8  18C1                             258    MOVE.B  D1,(A4)+           *Push del registro D1 en el buffer
000025EA  21CC 2364                        259    MOVE.L  A4,RBB_INT_PUNT           *Guarda la nueva direcion del puntero
000025EE  4E75                             260    RTS
000025F0                                   261  
000025F0                                   262  RBB_AUX:
000025F0  B5CB                             263    CMP.L A3,A2  * E=P?
000025F2  6700 00B2                        264    BEQ   LLENO
000025F6  2878 2358                        265    MOVE.L  RBB_IN_PUNT,A4
000025FA  1881                             266    MOVE.B  D1,(A4)   *Push del registro D1 en el buffer
000025FC  21CC 2364                        267    MOVE.L  A4,RBB_INT_PUNT  *Se Inicializa I con el valor de Principio
00002600  4E75                             268    RTS
00002602                                   269  
00002602                                   270  EA_LINEA:
00002602  B07C 0000                        271    CMP #$00000000,D0
00002606  6700 0050                        272    BEQ EA_REC
0000260A                                   273  
0000260A  2878 2374                        274  EA_TRANS:  MOVE.L TBA_INT_PUNT,A4 *Se mete el puntero I en A4
0000260E  2A78 236C                        275    MOVE.L TBA_FIN_PUNT,A5 *Se mete el puntero FIn en A5
00002612  2678 2370                        276    MOVE.L TBA_EXT_PUNT,A3 *Se mete el puntero de E al A3
00002616  2478 2368                        277    MOVE.L  TBA_IN_PUNT,A2 *Se mete el puntero de Principio al A2
0000261A  538B                             278    SUB.L #1,A3  *Se le resta 1 a E
0000261C  B9CB                             279    CMP.L A3,A4 * I=E-1?
0000261E  528B                             280    ADD.L #1,A3  *Se restablece el valor de E
00002620  6700 0084                        281    BEQ LLENO
00002624  528D                             282    ADD.L #1,A5   *Se le añade 1 al puntero de fin
00002626  BBCC                             283    CMP.L A4,A5   *Se comparan los punteros I y F+1
00002628  538D                             284    SUB.L #1,A5   *Se restablece el valor del puntero FIn
0000262A  6700 001A                        285    BEQ  TBA_AUX      *Está en la posicion auxiliar
0000262E                                   286  
0000262E                                   287  TBA_NO_AUX:
0000262E  B9CB                             288    CMP.L A3,A4  *Se comparan I y E
00002630  6C00 000C                        289    BGE TBA_MAYOR
00002634  528C                             290    ADD.L #1,A4
00002636  1881                             291    MOVE.B  D1,(A4)            *Push del registro D1 en el buffer
00002638  21CC 2374                        292    MOVE.L  A4,TBA_INT_PUNT    *Guarda la nueva direcion del puntero
0000263C  4E75                             293    RTS
0000263E                                   294  TBA_MAYOR:
0000263E  18C1                             295    MOVE.B  D1,(A4)+           *Push del registro D1 en el buffer
00002640  21CC 2374                        296    MOVE.L  A4,TBA_INT_PUNT           *Guarda la nueva direcion del puntero
00002644  4E75                             297    RTS
00002646                                   298  
00002646                                   299  TBA_AUX:
00002646  B5CB                             300    CMP.L A3,A2  * E=P?
00002648  6700 005C                        301    BEQ   LLENO
0000264C  2878 2368                        302    MOVE.L  TBA_IN_PUNT,A4
00002650  1881                             303    MOVE.B  D1,(A4)   *Push del registro D1 en el buffer
00002652  21CC 2374                        304    MOVE.L  A4,TBA_INT_PUNT  *Se Inicializa I con el valor de Principio
00002656  4E75                             305    RTS
00002658                                   306  
00002658                                   307  
00002658                                   308  EA_REC:
00002658  2878 2354                        309    MOVE.L RBA_INT_PUNT,A4 *Se mete el puntero I en A4
0000265C  2A78 234C                        310    MOVE.L RBA_FIN_PUNT,A5 *Se mete el puntero FIn en A5
00002660  2678 2350                        311    MOVE.L RBA_EXT_PUNT,A3 *Se mete el puntero de E al A3
00002664  2478 2348                        312    MOVE.L RBA_IN_PUNT,A2 *Se mete el puntero de Principio al A2
00002668  538B                             313    SUB.L #1,A3  *Se le resta 1 a E
0000266A  B9CB                             314    CMP.L A3,A4 * I=E-1?
0000266C  528B                             315    ADD.L #1,A3  *Se restablece el valor de E
0000266E  6700 0036                        316    BEQ LLENO
00002672  528D                             317    ADD.L #1,A5   *Se le añade 1 al puntero de fin
00002674  BBCC                             318    CMP.L A4,A5   *Se comparan los punteros I y F+1
00002676  538D                             319    SUB.L #1,A5   *Se restablece el valor del puntero FIn
00002678  6700 001A                        320    BEQ  RBA_AUX      *Está en la posicion auxiliar
0000267C                                   321  
0000267C                                   322  RBA_NO_AUX:
0000267C  B9CB                             323    CMP.L A3,A4  *Se comparan I y E
0000267E  6C00 000C                        324    BGE RBA_MAYOR
00002682  528C                             325    ADD.L #1,A4
00002684  1881                             326    MOVE.B  D1,(A4)            *Push del registro D1 en el buffer
00002686  21CC 2354                        327    MOVE.L  A4,RBA_INT_PUNT    *Guarda la nueva direcion del puntero
0000268A  4E75                             328    RTS
0000268C                                   329  RBA_MAYOR:
0000268C  18C1                             330    MOVE.B  D1,(A4)+           *Push del registro D1 en el buffer
0000268E  21CC 2354                        331    MOVE.L  A4,RBA_INT_PUNT           *Guarda la nueva direcion del puntero
00002692  4E75                             332    RTS
00002694                                   333  
00002694                                   334  RBA_AUX:
00002694  B5CB                             335    CMP.L A3,A2  * E=P?
00002696  6700 000E                        336    BEQ   LLENO
0000269A  2878 2348                        337    MOVE.L  RBA_IN_PUNT,A4
0000269E  1881                             338    MOVE.B  D1,(A4)   *Push del registro D1 en el buffer
000026A0  21CC 2354                        339    MOVE.L  A4,RBA_INT_PUNT  *Se Inicializa I con el valor de Principio
000026A4  4E75                             340    RTS
000026A6                                   341  LLENO:
000026A6  70FF                             342      MOVE.L #$ffffffff,D0
000026A8  4E75                             343      RTS
000026AA                                   344  
000026AA                                   345  ********************LINEA********************
000026AA                                   346  
000026AA                                   347  LINEA:
000026AA  0800 0000                        348    BTST #0,D0
000026AE  6700 005E                        349    BEQ LINEA_A
000026B2                                   350  
000026B2                                   351  LINEA_B:
000026B2  B07C 0001                        352    CMP #$00000001,D0
000026B6  6700 002C                        353    BEQ LINEAB_REC
000026BA                                   354  
000026BA                                   355  LINEAB_TRANS:
000026BA  2678 2378                        356    MOVE.L  TBB_IN_PUNT,A3 *Se mete el puntero de Principio al A2
000026BE                                   357  
000026BE  2878 2384                        358    MOVE.L TBB_INT_PUNT,A4 *Se mete el puntero I en A4
000026C2  2A78 237C                        359    MOVE.L TBB_FIN_PUNT,A5 *Se mete el puntero FIn en A5
000026C6  4280                             360    CLR.L D0 *Contador
000026C8                                   361  TBB_BUCLE_LINEA:
000026C8  BACB                             362    CMP A3,A5
000026CA  6700 00A2                        363    BEQ FIN_LINEA
000026CE  B6CC                             364    CMP A4,A3
000026D0  6700 0098                        365    BEQ L_VACIO
000026D4  4281                             366    CLR.L D1
000026D6                                   367  
000026D6  5200                             368    ADD.B #1,D0
000026D8  121B                             369    MOVE.B (A3)+,D1
000026DA  B27C 000D                        370    CMP #13,D1
000026DE  6700 009C                        371    BEQ F_LINEA
000026E2  60E4                             372    BRA TBB_BUCLE_LINEA
000026E4                                   373  
000026E4                                   374  LINEAB_REC:
000026E4  2678 2358                        375    MOVE.L RBB_IN_PUNT,A3 *Se mete el puntero de Principio al A2
000026E8  2878 2364                        376    MOVE.L RBB_INT_PUNT,A4 *Se mete el puntero I en A4
000026EC  2A78 235C                        377    MOVE.L RBB_FIN_PUNT,A5 *Se mete el puntero FIn en A5
000026F0  4280                             378    CLR.L D0 *Contador
000026F2                                   379  RBB_BUCLE_LINEA:
000026F2  BACB                             380    CMP A3,A5
000026F4  6700 0078                        381    BEQ FIN_LINEA
000026F8  B6CC                             382    CMP A4,A3
000026FA  6700 006E                        383    BEQ L_VACIO
000026FE  4281                             384    CLR.L D1
00002700  5200                             385    ADD.B #1,D0
00002702  121B                             386    MOVE.B (A3)+,D1
00002704  B27C 000D                        387    CMP #13,D1
00002708  6700 0072                        388    BEQ F_LINEA
0000270C  60E4                             389    BRA RBB_BUCLE_LINEA
0000270E                                   390  
0000270E                                   391  LINEA_A:
0000270E  B07C 0000                        392    CMP #$00000000,D0
00002712  6700 002C                        393    BEQ LINEAA_REC
00002716                                   394  
00002716                                   395  LINEAA_TRANS:
00002716  2678 2368                        396    MOVE.L TBA_IN_PUNT,A3 *Se mete el puntero de Principio al A2
0000271A  2878 2374                        397    MOVE.L TBA_INT_PUNT,A4 *Se mete el puntero I en A4
0000271E  2A78 236C                        398    MOVE.L TBA_FIN_PUNT,A5 *Se mete el puntero FIn en A5
00002722  4280                             399    CLR.L D0 *Contador
00002724                                   400  TBA_BUCLE_LINEA:
00002724  BACB                             401    CMP A3,A5
00002726  6700 0046                        402    BEQ FIN_LINEA
0000272A  B6CC                             403    CMP A4,A3
0000272C  6700 003C                        404    BEQ L_VACIO
00002730  4281                             405    CLR.L D1
00002732  5200                             406    ADD.B #1,D0
00002734  121B                             407    MOVE.B (A3)+,D1
00002736  B27C 000D                        408    CMP #13,D1
0000273A  6700 0040                        409    BEQ F_LINEA
0000273E  60E4                             410    BRA TBA_BUCLE_LINEA
00002740                                   411  
00002740                                   412  LINEAA_REC:
00002740  2678 2348                        413    MOVE.L RBA_IN_PUNT,A3 *Se mete el puntero de Principio al A2
00002744  2878 2354                        414    MOVE.L RBA_INT_PUNT,A4 *Se mete el puntero I en A4
00002748  2A78 234C                        415    MOVE.L RBA_FIN_PUNT,A5 *Se mete el puntero FIn en A5
0000274C  4280                             416    CLR.L D0 *Contador
0000274E                                   417  RBA_BUCLE_LINEA:
0000274E  BACB                             418    CMP A3,A5
00002750  6700 001C                        419    BEQ FIN_LINEA
00002754  B6CC                             420    CMP A4,A3
00002756  6700 0012                        421    BEQ L_VACIO
0000275A  4281                             422    CLR.L D1
0000275C  5200                             423    ADD.B #1,D0
0000275E  121B                             424    MOVE.B (A3)+,D1
00002760  B27C 000D                        425    CMP #13,D1
00002764  6700 0016                        426    BEQ F_LINEA
00002768  60E4                             427    BRA RBA_BUCLE_LINEA
0000276A                                   428  
0000276A                                   429  L_VACIO:
0000276A  4280                             430    CLR.L D0
0000276C  4E75                             431    RTS
0000276E                                   432  FIN_LINEA:
0000276E  5280                             433    ADD.L #1,D0
00002770  121B                             434    MOVE.B (A3)+,D1
00002772  B27C 000D                        435    CMP #13,D1
00002776  6700 0004                        436    BEQ F_LINEA
0000277A  4280                             437    CLR.L D0
0000277C  4E75                             438  F_LINEA: RTS
0000277E                                   439  
0000277E                                   440  *PRINT
0000277E  4E75                             441  PRINT:RTS
00002780                                   442  *SCAN
00002780  4E75                             443  SCAN:RTS
00002782                                   444  
00002782                                   445  *RTI
00002782  4E75                             446  RTI:RTS
00002784                                   447  
00002784                                   448  
00002784                                   449  *Pruebas
00002784                                   450  
00002784                                   451  *Programa Principal
00002784                                   452  INICIO:
00002784  6100 FC02                        453     BSR INIT
00002788  7000                             454     MOVE.L #$00000000,D0
0000278A  7201                             455     MOVE.L #1,D1
0000278C  6100 FDC8                        456     BSR ESCCAR
00002790  6100 FC98                        457     BSR LEECAR
00002794  7000                             458     MOVE.L #$00000000,D0
00002796  6100 FF12                        459     BSR LINEA
0000279A  7001                             460     MOVE.L #$00000001,D0
0000279C  720D                             461     MOVE.L #13,D1
0000279E  6100 FDB6                        462     BSR ESCCAR
000027A2  6100 FC86                        463     BSR LEECAR
000027A6  7001                             464     MOVE.L #$00000001,D0
000027A8  6100 FF00                        465     BSR LINEA
000027AC  7011                             466     MOVE.L #$00000011,D0
000027AE  7202                             467     MOVE.L #2,D1
000027B0  6100 FDA4                        468     BSR ESCCAR
000027B4  6100 FC74                        469     BSR LEECAR
000027B8  7011                             470     MOVE.L #$00000011,D0
000027BA  6100 FEEE                        471     BSR LINEA
000027BE  7010                             472     MOVE.L #$00000010,D0
000027C0  720D                             473     MOVE.L #13,D1
000027C2  6100 FD92                        474     BSR ESCCAR
000027C6  6100 FC62                        475     BSR LEECAR
000027CA  7010                             476     MOVE.L #$00000010,D0
000027CC  6100 FEDC                        477     BSR LINEA
000027D0  4848                             478     BREAK

No errors detected
No warnings generated
